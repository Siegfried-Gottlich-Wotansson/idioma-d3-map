<div id="info">
      <div id="neighborhood_details" class="neighborhood_info">
        <h2 id="name">Click on a state to learn about the languages spoken there.</h2>
        <div id="options">
            <%= form_tag({:url => "/state_languages/data", method: "get"}, {:id => "select_state"}) do %>
              <%= select_tag "state", options_from_collection_for_select(State.all, :name, :name), :prompt => "Select a State" %>
            <% end %>
        </div>
        <div id="language_data"></div>
        <div id="view_choices">
          <h2>Choose a view for your map:</h2>
          <ul>
            <li class="view_option" id="0"><button type="button">First Language</button></li>
            <li class="view_option" id="1"><button type="button">Second Language</button></li>
            <li id="reset"><button type="button">Reset Map</button></li>
          </ul>
        </div>
        <div id="display-key"></div>
      </div>
  </div>
  <div id="usaMap"></div>

<script>
  function displayStateInfo(stateName) {
  var url = "<%= state_data_path %>";
    $.ajax({
      url: url,
      data: {'name': stateName},
      method: "GET",
      dataType: "JSON"
    }).success(function(data){
      $('#language_data').html(data.text);
    })
  };

  function colorCodeMap(id){
    var url = "<%= visualize_path %>"
    $.ajax({
      url: url,
      data: {'language_num': id},
      method: "GET",
      dataType: "JSON"
    }).success(function(data){
      var state_names = data["state_names"];
      var all_state_data = data["data"];
      for (var i=0; i < state_names.length; i++){
        var state_name = state_names[i];
        var state_data = all_state_data[state_name];
        var sluggedName = createSlug(state_name);
        var selector = "#" + sluggedName;
        console.log(sluggedName, state_data.color, state_data.language)
        $(selector).css("fill", state_data.color);
      }
      $("#display-key").html(data['text']);
    })
  }

</script>
